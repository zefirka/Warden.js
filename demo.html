<!DOCTYPE html>
<html>
    <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Warden.js : Demos">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript" src="assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/warden.min.js"></script>
    <script type="text/javascript" src="assets/js/highlight.pack.js"></script>
    <script type="text/javascript" src="assets/js/main.js"></script>
    <script type='text/javascript' src='assets/js/demos.js'></script>

    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/github.css">    
     

    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" href="favicon.png">

    <title>Warden.js : Demos</title>
</head>
    <body>
        <header>
            <section id='logo' class='hidden-xs hidden-sm'>
              <div class="container">
                <div class='img-container'>
                  <a href="index.html">
                    <img src="assets/images/logo.png">
                  </a>
                </div>
              </div>
            </section>
            <section id='hpos' class='hidden-md hidden-lg'>
              <div class="container center">
                <a href="index.html"><h1>Warden.js</h1></a>
              </div>
            </section>
            <nav>
              <ul class='container no-padding'>
                <li class="col-md-3 col-sm-3 col-xs-6 col-lg-3 "><a href="about.html">About</a></li>
                <li class="col-md-3 col-sm-3 col-xs-6 col-lg-3 "><a href="docs.html">API</a></li>
                <li class="col-md-3 col-sm-3 col-xs-6 col-lg-3 "><a href="demo.html">Tutorials</a></li>
                <li class="col-md-3 col-sm-3 col-xs-6 col-lg-3 "><a href="download.html">Download</a></li>
                <a href="https://github.com/zefirka/Warden.js" class='fork'></a>
              </ul>
            </nav>
          </header>
        <input type="hidden" id='active_tab' value="{{active_tab}}">
        <div class="container">
  <div class="row">
    <div class="col-md-3 col-sm-3 col-xs-12 col-lg-2">
  <h2>Demos</h2>
  <ul id='submenu'>
    <li>Simple</li>
    <li><a href="pubsub.html">Pub/Sub</a></li>
    <li><a href="streams.html">Streams</a></li>
    <li>Event streams</li>
    <li><a href="counter.html">Counter</a></li>
    <li><a href="dragndrop.html">Drag'n'Drop</a></li>
    <li><a href="away.html">Away module</a></li>
    <li><a href="http.html">HTTP Ajax module</a></li>
    <li>Composing</li>
    <li><a href="sync.html">Synchronization</a></li>
    <li><a href="combining.html">Combining</a></li>
    <li>Formulas</li>
    <li><a href="formula.html">Formulas</a></li>
    <li><a href="counting.html">Resolving</a></li>
  </ul>
</div>
    <div class="col-md-9 col-sm-9 col-xs-12 col-lg-10">
      <h1>Tutorials and examples</h1>
     	<table id='demo-tab'>
     		<thead>
     			<tr>
     				<th width="50%">Vanilla</th>
     				<th width="50%">Warden</th>
     			</tr>
     		</thead>
     		<tbody>
     			<tr><td colspan='2'>
     				<h2>Streaming events</h2>
     			</td></tr>
     			<tr>
     			<td width="50%">
<pre><code class='javascript'>eventSource.on('eventType', function(eventData){
  if(valied(eventData)){
    rootObject.result = processData(eventData);		
  }
});
</code></pre>
     			</td>
     			<td width="50%">
<pre><code class='javascript'>eventSource
  .stream('eventType')
  .filter(valid)
  .map(processData)
  .bindTo(rootObject, 'result');
</code></pre>
				</tr>

        <tr><td colspan='2'>
          <h2>Event processing</h2>
        </td></tr>  
        <tr>
          </td>
          <td width="50%">
<pre><code class='javascript'>var cachedTime;
button.addEventListener('click', function(e){
  var self = this;
  clearTimeout(timer);
  timer = setTimeout(function(){
    send(self.value);
  }, 500)
});
</code></pre>
          </td>
          <td width="50%">
<pre><code class='javascript'>Warden(button)
  .stream('click')
  .debounce(500)
  .map('@value')
  .listen(send);
</code></pre>
          </td></tr>

          <tr><td colspan='2'>
          <h2>Event composing</h2>
        </td></tr>  
        <tr>
          </td>
          <td width="50%">
<pre><code class='javascript'>var cachedTime, cachedFrom;
function log(data){
  console.log('Data from socket ' + data.socket_name + ' was recived first');
}

/* Actually i dunno does this implements neccesary logic or not. It's too hard */

function callback(e){
  if(!cachedFrom){
    cachedFrom = e.socket_name;
    cachedTime = e.timeStamp;
  }else{
    if(cachedFrom != e.socket_name){
      if(cachedTime > e.timeStamp){
          log(e)
      }else{
        cachedTime = e.timeStamp
      }
    }else{
      cached_time = e.timeStamp;
    }
  }
}

socket.on('a', callback);
socket.on('b', callback);
</code></pre>
          </td>
          <td width="50%">
<pre><code class='javascript'>socket.stream('a').resolve(socket.stream('b'), function(a, b){
  return a.timeStamp > b.timeStamp ? a : b;
}).listen(function(data){
  console.log('Data from socket ' + data.socket_name + ' was recived first');
})
</code></pre>
          </td></tr>

				<tr><td colspan='2'>
					<h2>Reactive Calculations</h2>
				</td></tr>	
     			<tr>
     			<td width="50%">
<pre><code class='javascript'>var a = 10;
var b = 20;
var c = a + b;
console.log(c); 

// -> 30;

a = 20;
console.log(c);

// -> 30
// To update you need:
c = a + b;
console.log(c)
// -> 40
</code></pre>
     			</td>
     			<td width="50%">
<pre><code class='javascript'>var a = Warden(10);
var b = Warden(20);
var c = Warden.Formula([a,b], function(x,y){
  return x + y;
});

console.log(c.value); 
// -> 30

a.value = 20;
console.log(c.value); 
// -> 40  
// It updates itself
</code></pre>
				</tr>

				<tr><td colspan='2'>
					<h2>Values in time</h2>
				</td></tr>	
     			<tr>
     			<td width="50%">
<pre><code class='javascript'>var a = 0;
var b = 0;
function bigger(x, y){
	return x > y ? x : y;
}

var c = bigger(a, b);

a = 20;
b = 10;
// c = 0;
c = bigger(a, b);
// c = 20
b = 30;
c = bigger(a, b)
// c = 30
// need to update c every time
</code></pre>
     			</td>
     			<td width="50%">
<pre><code class='javascript'>var a = Warden(0);
var b = Warden(0);
var c = a.combine(b, bigger).watch();

a.value = 20;
// c.value  = 20

b.value = 30;
// c.value = 30;

a.value = 40;
// c.value = 40;
</code></pre>
				</tr>
     		</tbody>
     	</table>
      	
      	
     
    </div>
  </div>
</div>
    </body>
</html>